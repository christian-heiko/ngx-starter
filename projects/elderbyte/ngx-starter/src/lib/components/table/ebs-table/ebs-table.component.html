
<div fxLayout="column" class="mat-elevation-z5" fxFlex>

  <!-- TODO: Table toolbar injection here -->

  <div fxLayout="column" class="scrollable">
    <table
      mat-table
      class="responsiveTable"
      [trackBy]="trackByFn"
      [dataSource]="data"
    >

      <!-- selection Column -->
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox *ngIf="selectionModel.isMultipleSelection"
                        (change)="$event ? masterToggle() : null"
                        [checked]="selectionModel.hasValue && isAllSelected"
                        [indeterminate]="selectionModel.hasValue && !isAllSelected">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let entity">
          <mat-checkbox (click)="$event.stopPropagation()"
                        (change)="$event ? selectionModel.toggle(entity) : null"
                        [checked]="selectionModel.isSelected(entity)">
          </mat-checkbox>
        </td>
      </ng-container>

      <!-- project child content here -->
      <ng-content></ng-content>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsInner; sticky: true"></tr>
      <tr mat-row class="clickable" *matRowDef="let entity; columns: displayedColumnsInner;"
          (click)="$event ? onItemClick(entity) : null">
      </tr>
    </table>
  </div>

  <div fxLayout="column" fxFlex fxLayoutAlign="center center">

    <span *ngIf="data.isEmpty && !data.statusSnapshot.hasError">
      {{'No data available' | translate}}
    </span>

    <div *ngIf="data.statusSnapshot.hasError"
         fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="20px">
      <mat-icon color="warn">warning</mat-icon>
      <span>{{'Error while loading data' | translate}}</span>
    </div>

  </div>

  <mat-progress-bar fxFlex="none"
                    [mode]="data?.loadingIndicator ? 'indeterminate' : 'determinate'"
                    [color]="(data && data.statusSnapshot.hasError) ? 'warn' : 'primary'">
  </mat-progress-bar>

  <mat-paginator #paginator
                 fxFlex="none"
                 [length]="data?.total"
                 [pageIndex]="data?.pageIndex"
                 [pageSize]="data?.pageSize"
                 [pageSizeOptions]="pageSizeOptions">
  </mat-paginator>

</div>
